<div class="nexus-post">
  <ng-container *ngIf="post$ | async as post">
    <article class="nexus-post__content">
      <h1 class="nexus-post__content-title">{{ post.title }}</h1>
      <ul class="nexus-post__topics">
        <li *ngFor="let topic of post.topics | slice : 0 : 2">
          <nexus-topic [data]="topic" [disabled]="true"></nexus-topic>
        </li>
      </ul>
      <header class="nexus-post__header">
        <section class="nexus-post__author">
          <span class="nexus-post__author-picture">
            {{ post.author?.name | slice : 0 : 1 }}
          </span>
          <address class="nexus-post__author-info">
            <span class="nexus-post__author-name">{{ post.author?.name }}</span>
            <time class="nexus-post__date">
              at {{ post.createdAt | date : 'dd/MM/yyyy HH:mm' }}
            </time>
          </address>
        </section>
        <button
          type="button"
          class="nexus-post__like"
          (click)="toggleLike(post)"
          *ngIf="isLoggedIn"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            viewBox="0 0 24 24"
            [attr.fill]="post.like?.id ? '#f8727260' : 'none'"
            [attr.stroke]="post.like?.id ? '#f87272' : 'currentColor'"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
            />
          </svg>
        </button>
      </header>
      <div [innerHTML]="post.content"></div>
    </article>
  </ng-container>
</div>
